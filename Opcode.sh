#!/bin/bash

for file in `ls $1/*.lst`
do
	if [ -f $file ]; then
		awk -F' ' '{print $2}' $file > $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^;/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^loc.*/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^unk.*/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^\.686p$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^\.mmx$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^\.model$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^unk_6C9$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^assume$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^seg000$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^end$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
		sed -i -n "/^$/d" $(dirname $file)"/../txt/"$(basename $file .lst)".txt"
	else
		echo "No lst files exists, please check!"
	fi
done
